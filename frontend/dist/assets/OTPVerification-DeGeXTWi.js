import{c as y,r,u as b,j as e}from"./index-BHP7NIO3.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);function w(){const[l,u]=r.useState(""),m=b(),a="onlybaby7999@gmail.com",h=r.useRef(null),[c,n]=r.useState(!1),[o,d]=r.useState(30);console.log(" email otp check",a),r.useEffect(()=>{if(o>0){const t=setInterval(()=>d(s=>s-1),1e3);return()=>clearInterval(t)}},[o]);const f=t=>{const i=t.target.value.replace(/[^0-9]/g,"");i.length<=6&&u(i)},p=t=>{["Backspace","ArrowLeft","ArrowRight","Tab"].includes(t.key)||(l.length>=6&&!t.ctrlKey&&!t.metaKey&&t.preventDefault(),/^\d$/.test(t.key)||t.preventDefault())},x=async t=>{n(!0),t.preventDefault();try{const s=await fetch("http://localhost:5001/api/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,enteredOtp:l})}),i=await s.json();s.ok?(alert("OTP verified successfully!"),n(!1),m("/")):alert(i.message||"Invalid OTP")}catch(s){console.error("Error during OTP verification:",s),alert("An error occurred during OTP verification")}n(!1)},g=async()=>{n(!0);try{const t=await fetch("http://localhost:5001/api/auth/resend-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})}),s=await t.json();t.ok?(alert("A new OTP has been sent to your email."),d(30)):alert(s.message||"Failed to resend OTP.")}catch(t){console.error("Error during resending OTP:",t),alert("An error occurred while resending OTP.")}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("div",{className:"bg-indigo-100 p-3 rounded-full mb-4",children:e.jsx(j,{className:"w-6 h-6 text-indigo-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Verify Your Email"})]}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsx("input",{ref:h,type:"text",inputMode:"numeric",pattern:"[0-9]*",value:l,onChange:f,onKeyDown:p,placeholder:"Enter OTP",required:!0,maxLength:6,autoComplete:"one-time-code",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors text-center text-lg tracking-wider"}),e.jsx("button",{type:"submit",disabled:c,className:`w-full px-4 py-2 text-white rounded-lg focus:outline-none focus:ring-2 ${c?"bg-gray-400":"bg-blue-500 hover:bg-blue-600"}`,children:c?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h8a8 8 0 11-16 0z"})]}),"Processing..."]}):"Verify OTP"})]}),e.jsxs("div",{className:"mt-6 text-center",children:[o>0?e.jsxs("p",{className:"text-sm text-gray-600",children:["Resend OTP in ",e.jsxs("span",{className:"font-medium",children:[o,"s"]})]}):e.jsx("button",{type:"button",onClick:g,className:"text-sm text-blue-500 font-medium hover:underline focus:outline-none",children:"Resend OTP"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["OTP sent to: ",e.jsx("span",{className:"font-medium text-gray-800",children:a})]})]})]})})}export{w as default};
